<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Some Useful User Defined Functions</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  
  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="66" alt="Airkit Builders - The Official Airkit Builder Community" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">An archive of community.airkit.com as of Monday April 10, 2023.</div>
    <h1 class="topic-title">Some Useful User Defined Functions</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">ismaen</div>
          <div class="post_content">
<p>Courtesy of <span class="mention">@kyung</span>.</p>
<h3>
<a class="anchor" href="#arraysappend-1" name="arraysappend-1"></a>Arrays#Append</h3>
<pre><code class="lang-auto">FLAT([ array, [ element ] ])[?(@ &lt;&gt; NULL)]
</code></pre>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/CLpKQEaDZHlSqIqTil1QVBNlDH.png?dl=1" href="https://global.discourse-cdn.com/standard11/uploads/airkit/original/1X/0461c93713c18c4eda2d327ca76c6cf3abdff719.png" title="2022-01-25_13-47-47"><img alt="2022-01-25_13-47-47" data-base62-sha1="CLpKQEaDZHlSqIqTil1QVBNlDH" data-small-upload="https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/0461c93713c18c4eda2d327ca76c6cf3abdff719_2_10x10.png" height="280" src="../../../images/0461c93713c18c4eda2d327ca76c6cf3abdff719_2_690x280.png" srcset="https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/0461c93713c18c4eda2d327ca76c6cf3abdff719_2_690x280.png, https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/0461c93713c18c4eda2d327ca76c6cf3abdff719_2_1035x420.png 1.5x, https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/0461c93713c18c4eda2d327ca76c6cf3abdff719_2_1380x560.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">2022-01-25_13-47-47</span><span class="informations">1393×567 43.6 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<h3>
<a class="anchor" href="#arrayscombine-2" name="arrayscombine-2"></a>Arrays#Combine</h3>
<pre><code class="lang-auto">FLAT([ array, array_2 ])[?(@ &lt;&gt; NULL)]
</code></pre>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/jzfg0XepXMBKN2ojY5AaEXvcUC4.png?dl=1" href="https://global.discourse-cdn.com/standard11/uploads/airkit/original/1X/8925446efb4e872edf4ff343f32e5350a26f2b48.png" title="2022-01-25_13-48-41"><img alt="2022-01-25_13-48-41" data-base62-sha1="jzfg0XepXMBKN2ojY5AaEXvcUC4" data-small-upload="https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/8925446efb4e872edf4ff343f32e5350a26f2b48_2_10x10.png" height="280" src="../../../images/8925446efb4e872edf4ff343f32e5350a26f2b48_2_690x280.png" srcset="https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/8925446efb4e872edf4ff343f32e5350a26f2b48_2_690x280.png, https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/8925446efb4e872edf4ff343f32e5350a26f2b48_2_1035x420.png 1.5x, https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/8925446efb4e872edf4ff343f32e5350a26f2b48_2_1380x560.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">2022-01-25_13-48-41</span><span class="informations">1389×564 45.5 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<h3>
<a class="anchor" href="#arraysisvalid-3" name="arraysisvalid-3"></a>Arrays#IsValid</h3>
<pre><code class="lang-auto">LENGTH(array[?(ISNOTEMPTY(@))]) = LENGTH(array)
  AND LENGTH(array[?(ISNOTEMPTY(@))]) &gt; 0
</code></pre>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/clM2u7PZxg7gLTjbF4KHABRYimE.png?dl=1" href="https://global.discourse-cdn.com/standard11/uploads/airkit/original/1X/569036da09d5873dac3976bb8b62b6ef26c98614.png" title="2022-01-25_13-49-30"><img alt="2022-01-25_13-49-30" data-base62-sha1="clM2u7PZxg7gLTjbF4KHABRYimE" data-small-upload="https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/569036da09d5873dac3976bb8b62b6ef26c98614_2_10x10.png" height="255" src="../../../images/569036da09d5873dac3976bb8b62b6ef26c98614_2_690x255.png" srcset="https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/569036da09d5873dac3976bb8b62b6ef26c98614_2_690x255.png, https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/569036da09d5873dac3976bb8b62b6ef26c98614_2_1035x382.png 1.5x, https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/569036da09d5873dac3976bb8b62b6ef26c98614_2_1380x510.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">2022-01-25_13-49-30</span><span class="informations">1389×515 47.9 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<h3>
<a class="anchor" href="#arraysdeleteitem-4" name="arraysdeleteitem-4"></a>Arrays#DeleteItem</h3>
<pre><code class="lang-auto">FROM
  p,
  idx
IN
  array
WHERE
  NOT(
    index = idx
  )
SELECT
  p
</code></pre>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/9l6j41qVMeeVEWRgfZIeR4Ce3lf.png?dl=1" href="https://global.discourse-cdn.com/standard11/uploads/airkit/original/1X/417636bc3a1e4d99b80bc9ad5f0df7eaaa07b1e1.png" title="2022-01-25_13-50-21"><img alt="2022-01-25_13-50-21" data-base62-sha1="9l6j41qVMeeVEWRgfZIeR4Ce3lf" data-small-upload="https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/417636bc3a1e4d99b80bc9ad5f0df7eaaa07b1e1_2_10x10.png" height="272" src="../../../images/417636bc3a1e4d99b80bc9ad5f0df7eaaa07b1e1_2_690x272.png" srcset="https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/417636bc3a1e4d99b80bc9ad5f0df7eaaa07b1e1_2_690x272.png, https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/417636bc3a1e4d99b80bc9ad5f0df7eaaa07b1e1_2_1035x408.png 1.5x, https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/417636bc3a1e4d99b80bc9ad5f0df7eaaa07b1e1_2_1380x544.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">2022-01-25_13-50-21</span><span class="informations">1396×552 51.3 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<h3>
<a class="anchor" href="#objectsset-edited-per-comments-5" name="objectsset-edited-per-comments-5"></a>Objects#Set (Edited per comments)</h3>
<pre><code class="lang-auto">MERGE_OBJECTS(
  [ obj, { "{{key}}": value } ]
)
</code></pre>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/vCacYUpCQYoLTGArq6CwMhmVpzn.png?dl=1" href="https://global.discourse-cdn.com/standard11/uploads/airkit/original/1X/dd93d0310f9018cfcf9685e09b23db747debd26d.png" title="2022-01-25_13-50-59"><img alt="2022-01-25_13-50-59" data-base62-sha1="vCacYUpCQYoLTGArq6CwMhmVpzn" data-small-upload="https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/dd93d0310f9018cfcf9685e09b23db747debd26d_2_10x10.png" height="303" src="../../../images/dd93d0310f9018cfcf9685e09b23db747debd26d_2_690x303.png" srcset="https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/dd93d0310f9018cfcf9685e09b23db747debd26d_2_690x303.png, https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/dd93d0310f9018cfcf9685e09b23db747debd26d_2_1035x454.png 1.5x, https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/dd93d0310f9018cfcf9685e09b23db747debd26d_2_1380x606.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">2022-01-25_13-50-59</span><span class="informations">1391×611 47.3 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<h3>
<a class="anchor" href="#objectsremove-6" name="objectsremove-6"></a>Objects#Remove</h3>
<pre><code class="lang-auto">FROM
  p
IN
  KEYS(
    obj
  )
WHERE
  NOT(
    CONTAINS(
      FLAT(
        [ keys ]
      ),
      p
    )
  )
SELECT
  "{{p}}": obj[p]
</code></pre>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/2EDDMdSAbMGfWxT7FztnN5dVMHf.png?dl=1" href="https://global.discourse-cdn.com/standard11/uploads/airkit/original/1X/129c61d1785b322e03f9dcabf516c26aab30d461.png" title="2022-01-25_13-51-36"><img alt="2022-01-25_13-51-36" data-base62-sha1="2EDDMdSAbMGfWxT7FztnN5dVMHf" data-small-upload="https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/129c61d1785b322e03f9dcabf516c26aab30d461_2_10x10.png" height="280" src="../../../images/129c61d1785b322e03f9dcabf516c26aab30d461_2_690x280.png" srcset="https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/129c61d1785b322e03f9dcabf516c26aab30d461_2_690x280.png, https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/129c61d1785b322e03f9dcabf516c26aab30d461_2_1035x420.png 1.5x, https://global.discourse-cdn.com/standard11/uploads/airkit/optimized/1X/129c61d1785b322e03f9dcabf516c26aab30d461_2_1380x560.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">2022-01-25_13-51-36</span><span class="informations">1392×565 49.3 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/17_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">ian</div>
          <div class="post_content">
<p><img alt=":exploding_head:" class="emoji" src="../../../images/exploding_head.png" title=":exploding_head:"/> as usual.  These are really useful!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/33_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">ackerman</div>
          <div class="post_content">
<p>Thank you for these!!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/26_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">kyung</div>
          <div class="post_content">
<p>One note, Object#Set needs a minor change:</p>
<pre><code class="lang-auto">MERGE_OBJECTS(
  [ obj, { "{{key}}": value } ]
)
</code></pre>
<p>Ran into an issue when testing it.  <img alt=":slightly_smiling_face:" class="emoji" src="../../../images/slightly_smiling_face.png" title=":slightly_smiling_face:"/></p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>
